<!DOCTYPE html>
<html>
  <head>
    <title>Building an Merger</title>
    <style>
      .flex-container {
        display: flex;
        flex-direction: row;
        background-color: red;
      }

      .flex-container > div {
        /*div children of the flex container*/
        background-color: #f1f1f1;
        margin: 10px;
        padding: 20px;
        font-size: 30px;
      }

      /* Responsive layout */
      @media (max-width: 600px) {
        .flex-container {
          flex-direction: column;
          background-color: green;
        }
      }
    </style>
  </head>

  <body>
    <h1><i>Shiva Kumar Reddy Bakkannagari - Build a merger</i></h1>
    <label for="inputText">
      Enter some value
      <input type="text" name="" id="inputText" />
    </label>

    <div class="flex-container" id="target">
      <div class="merger">row item 1</div>
      <div class="merger">row item 2</div>
      <div class="merger">row item 3</div>
    </div>

    <p>
      Press the button to create an new element of type div and then add it to
      the container.
    </p>
    <button onclick="makeNewDiv()">Add end</button>
    <button onclick="addFront()">Add front</button>
    <button onclick="remove()">Remove</button>
    <button onclick="swapElements()">Swap</button>
  </body>
  <script>
    function makeNewDiv() {
      const value = document.getElementById("inputText").value;
      /* make the div and its text */
      let element = document.createElement("div");
      element.innerHTML = value;
      element.className = "merger";

      /* add it to the container */
      let container = document.getElementById("target");
      container.appendChild(element);
    }

    const remove = () => {
      let mergerItems = document.getElementsByClassName("merger");
      const lengthOfItems = mergerItems.length;
      let middleIdx = Math.floor(lengthOfItems / 2);

      if (lengthOfItems > 0) {
        mergerItems[middleIdx].remove();
      }
    };

    const addFront = () => {
      const value = document.getElementById("inputText").value;
      /* make the div and its text */
      let element = document.createElement("div");
      element.innerHTML = value;
      element.className = "merger";

      /* add it to the container */
      let container = document.getElementById("target");
      container.insertBefore(element, container.firstChild);
    };

    const swapElements = () => {
      let mergerItems = document.getElementsByClassName("merger");
      let length = mergerItems.length;

      if (length >= 2) {
        let index1 = Math.floor(Math.random() * length);
        let index2 = Math.floor(Math.random() * length);

        // Ensure distinct indices
        while (index2 === index1) {
          index2 = Math.floor(Math.random() * length);
        }

        let temp = mergerItems[index1].cloneNode(true);
        mergerItems[index1].replaceWith(mergerItems[index2].cloneNode(true));
        mergerItems[index2].replaceWith(temp);
      }
    };
  </script>
</html>
